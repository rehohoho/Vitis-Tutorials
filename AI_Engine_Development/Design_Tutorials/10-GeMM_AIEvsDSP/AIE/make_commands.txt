# x86sim
# aiecompiler \
  -include=design/aie_src \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -include=design/aie_src/aiesim_data/gemm_32x32x32_ioFiles \
  --verbose \
  --Xpreproc="-DITER_CNT=16" \
  --Xpreproc="-DGEMM_SIZE=32" \
  --Xpreproc="-DGEMM_INSTS=1" \
  --Xpreproc=-O0 \
  --xlopt=0 \
  --platform=/tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --target=x86sim \
  --log-level=5 \
  --pl-freq=312.5 \
  --dataflow \
  --constraints=design/aie_src/constraints.aiecst \
  --Xmapper=BufferOptLevel9 \
  --Xrouter=DMAFIFOsInFreeBankOnly \
  --workdir=build/gemm_32x32x32/x1/sw_emu/Work \
  --output-archive=build/gemm_32x32x32/x1/sw_emu/libadf_x86.a \
  design/aie_src/graph.cpp 2>&1 | tee -a build/gemm_32x32x32/x1/sw_emu/Work/aiecompiler.log

# x86simulator --i=design/aie_src/aiesim_data/gemm_32x32x32_ioFiles/ --pkg-dir=build/gemm_32x32x32/x1/sw_emu/Work/ --dump

# software emulation (x86)
# v++ \
  -D GEMM_SIZE=32 \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/sw_emu/_x \
  --verbose -g -c -k dma_hls \
  --kernel_frequency 250 \
  design/pl_src/dma_hls.cpp \
  -o build/gemm_32x32x32/x1/sw_emu/dma_hls.sw_emu.xo

v++ -l \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/sw_emu/_x \
  --verbose -g \
  --config design/system_configs/x1.cfg \
  -t sw_emu \
  -o build/gemm_32x32x32/x1/sw_emu/vck190_aie_gemm.sw_emu.xsa \
  build/gemm_32x32x32/x1/sw_emu/dma_hls.sw_emu.xo \
  build/gemm_32x32x32/x1/sw_emu/libadf_x86.a

# emconfigutil \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --nd 1 \
  --od build/gemm_32x32x32/x1/sw_emu/

v++ -p \
  -t sw_emu \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/sw_emu/_x \
  -f /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --package.emu_ps x86 \
  --package.defer_aie_run \
  build/gemm_32x32x32/x1/sw_emu/vck190_aie_gemm.sw_emu.xsa \
  build/gemm_32x32x32/x1/sw_emu/libadf_x86.a
  -o build/gemm_32x32x32/x1/sw_emu/a.xclbin 

# g++ \
  -O \
  -c \
  -std=c++17 \
  -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -Idesign/aie_src \
  -Idesign/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  -I/opt/xilinx/xrt/include \
  build/gemm_32x32x32/x1/sw_emu/Work/ps/c_rts/aie_control_xrt.cpp \
  -o build/gemm_32x32x32/x1/sw_emu/app_control.o

# g++ \
  -O \
  -c \
  -std=c++17 \
  -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -Idesign/aie_src \
  -Idesign/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  -I/opt/xilinx/xrt/include design/host_app_src/gemm_aie_app.cpp \
  -o build/gemm_32x32x32/x1/sw_emu/gemm_aie_app.o \
  -L/opt/xilinx/xrt/lib \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o \
  -ladf_api_xrt \
  -lxrt_coreutil

# g++ \
  build/gemm_32x32x32/x1/sw_emu/app_control.o \
  build/gemm_32x32x32/x1/sw_emu/gemm_aie_app.o \
  -L/opt/xilinx/xrt/lib \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o \
  -ladf_api_xrt \
  -lxrt_coreutil \
  -o build/gemm_32x32x32/x1/sw_emu/gemm_aie_xrt.elf

# export XCL_EMULATION_MODE=sw_emu
# export XILINX_XRT=/opt/xilinx/xrt/
# export X86SIM_OPTIONSPATH=build/gemm_32x32x32/x1/sw_emu/Work/options/x86sim.options #x86sim
# cd build/gemm_32x32x32/x1/sw_emu/
# ./gemm_aie_xrt.elf a.xclbin


# software emulation (qemu)
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux -O -c -std=c++14 -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include/xrt \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -I/design/aie_src \
  -I/design/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  build/gemm_32x32x32/x1/sw_emu/Work/ps/c_rts/aie_control_xrt.cpp \
  -o build/gemm_32x32x32/x1/sw_emu/app_control.o
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux -O -c -std=c++14 -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include/xrt \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -Idesign/aie_src \
  -Idesign/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  design/host_app_src/gemm_aie_app.cpp \
  -o build/gemm_32x32x32/x1/sw_emu/gemm_aie_app.o \
  -L/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib -L/tools/Xilinx/Vitis/2022.2/aietools/lib/aarch64.o \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o -ladf_api_xrt -lxrt_coreutil
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security \
  --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux \
  build/gemm_32x32x32/x1/sw_emu/app_control.o \
  build/gemm_32x32x32/x1/sw_emu/gemm_aie_app.o \
  -L/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/aarch64.o \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o \
  -ladf_api_xrt -lxrt_coreutil \
  -o build/gemm_32x32x32/x1/sw_emu/gemm_aie_xrt.elf
# v++ -p -t sw_emu \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/sw_emu/_x \
  -f /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --package.rootfs /tools/xilinx-versal-common-v2022.2/rootfs.ext4 \
  --package.kernel_image /tools/xilinx-versal-common-v2022.2/Image \
  --package.boot_mode=sd \
  --package.out_dir build/gemm_32x32x32/x1/sw_emu/package \
  --package.image_format=ext4 \
  --package.sd_dir design/aie_src/aiesim_data/gemm_32x32x32_ioFiles \
  --package.sd_file build/gemm_32x32x32/x1/sw_emu/gemm_aie_xrt.elf \
  --package.sd_file design/exec_scripts/run_script.sh \
  --package.defer_aie_run \
  build/gemm_32x32x32/x1/sw_emu/vck190_aie_gemm.sw_emu.xsa \
  build/gemm_32x32x32/x1/sw_emu/libadf_x86.a \
  -o build/gemm_32x32x32/x1/sw_emu/a.xclbin 
# ./launch_sw_emu.sh -x86-sim-options ../Work/options/x86sim.options #QEMU
# export XILINX_XRT=/usr
# export LD_LIBRARY_PATH=/run/media/mmcblk0p1:/tmp:$LD_LIBRARY_PATH

# export LD_LIBRARY_PATH=/mnt:/tmp:$LD_LIBRARY_PATH
# export XCL_EMULATION_MODE=sw_emu




# hardware emulation
# kernels
# v++ --target hw_emu \
  --hls.clock 312500000:dma_hls -D GEMM_SIZE=32 \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/hw_emu/_x \
  --verbose -g -c -k dma_hls \
  design/pl_src/dma_hls.cpp \
  -o build/gemm_32x32x32/x1/hw_emu/dma_hls.hw_emu.xo

# graph
# aiecompiler --verbose --log-level=5 --dataflow \
  -include=design/aie_src \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -include=/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  --Xpreproc="-DITER_CNT=16" \
  --Xpreproc="-DGEMM_SIZE=32" \
  --Xpreproc="-DGEMM_INSTS=1" \
  --platform=/tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --pl-freq=312.5 \
  --constraints=design/aie_src/constraints.aiecst \
  --Xmapper=BufferOptLevel9 \
  --Xrouter=DMAFIFOsInFreeBankOnly \
  --workdir=build/gemm_32x32x32/x1/hw_emu/Work \
  design/aie_src/graph.cpp 2>&1 | tee -a build/gemm_32x32x32/x1/hw_emu/aiecompiler.log

# aiesim
# aiesimulator \
  --pkg-dir build/gemm_32x32x32/x1/hw_emu/Work/ \
  -i=design/aie_src/aiesim_data/gemm_32x32x32_ioFiles \
  -o=aiesim_output/ \
  --profile 2>&1 | tee -a aiesim.log

# xsa (linking)
# v++ -l -t hw_emu \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/hw_emu/_x \
  --verbose -g \
  --clock.freqHz 312500000:dma_hls_0 \
  --clock.defaultTolerance 0.001 \
  --config design/system_configs/x1.cfg \
  --vivado.prop fileset.sim_1.xsim.simulate.log_all_signals=true \
  --vivado.prop run.impl_1.STEPS.PLACE_DESIGN.TCL.PRE=design/directives/prohibit_select_bli_bels_for_hold.tcl \
  --vivado.prop run.synth_1.STEPS.SYNTH_DESIGN.ARGS.CONTROL_SET_OPT_THRESHOLD=16 \
  --vivado.prop run.impl_1.{STEPS.OPT_DESIGN.ARGS.IS_ENABLED}={true} \
  --vivado.prop run.impl_1.{STEPS.OPT_DESIGN.ARGS.DIRECTIVE}={Default} \
  --vivado.prop run.impl_1.{STEPS.PLACE_DESIGN.ARGS.DIRECTIVE}={SSI_BalanceSLLs} \
  --vivado.prop run.impl_1.{STEPS.PHYS_OPT_DESIGN.ARGS.IS_ENABLED}={true} \
  --vivado.prop run.impl_1.{STEPS.PHYS_OPT_DESIGN.ARGS.DIRECTIVE}={AggressiveExplore} \
  --vivado.prop run.impl_1.{STEPS.ROUTE_DESIGN.ARGS.DIRECTIVE}={Default} \
  --vivado.prop run.impl_1.{STEPS.POST_ROUTE_PHYS_OPT_DESIGN.ARGS.IS_ENABLED}={false} \
  -o build/gemm_32x32x32/x1/hw_emu/vck190_aie_gemm.hw_emu.xsa \
  build/gemm_32x32x32/x1/hw_emu/dma_hls.hw_emu.xo \
  build/gemm_32x32x32/x1/hw_emu/libadf.a

# application (PS)
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux -O -c -std=c++14 -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include/xrt \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -I/design/aie_src \
  -I/design/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  build/gemm_32x32x32/x1/hw_emu/Work/ps/c_rts/aie_control_xrt.cpp \
  -o build/gemm_32x32x32/x1/hw_emu/app_control.o
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux -O -c -std=c++14 -D__linux__ -D__PS_ENABLE_AIE__ -DXAIE_DEBUG \
  -DGEMM_INSTS=1 -DGEMM_SIZE=32 -DITER_CNT=16 \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include/xrt \
  -I/tools/Xilinx/Vitis/2022.2/aietools/include/ \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/include \
  -I/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -Idesign/aie_src \
  -Idesign/host_app_src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/src/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/inc \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L1/tests/aie/src \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/include/aie \
  -I/tools/Xilinx/Vitis_Libraries/dsp/L2/tests/aie/common/inc \
  design/host_app_src/gemm_aie_app.cpp \
  -o build/gemm_32x32x32/x1/hw_emu/gemm_aie_app.o \
  -L/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib -L/tools/Xilinx/Vitis/2022.2/aietools/lib/aarch64.o \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o -ladf_api_xrt -lxrt_coreutil
# aarch64-xilinx-linux-g++ \
  -mcpu=cortex-a72.cortex-a53 -march=armv8-a+crc -fstack-protector-strong -O2 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security \
  --sysroot=/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux \
  build/gemm_32x32x32/x1/hw_emu/app_control.o \
  build/gemm_32x32x32/x1/hw_emu/gemm_aie_app.o \
  -L/tools/xilinx-versal-common-v2022.2/sysroots/cortexa72-cortexa53-xilinx-linux/usr/lib \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/aarch64.o \
  -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o \
  -ladf_api_xrt -lxrt_coreutil \
  -o build/gemm_32x32x32/x1/hw_emu/gemm_aie_xrt.elf

# packaging
# v++ -p -t hw_emu \
  --save-temps \
  --temp_dir build/gemm_32x32x32/x1/hw_emu/_x \
  -f /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --package.rootfs /tools/xilinx-versal-common-v2022.2/rootfs.ext4 \
  --package.kernel_image /tools/xilinx-versal-common-v2022.2/Image \
  --package.boot_mode=sd \
  --package.out_dir build/gemm_32x32x32/x1/hw_emu/package \
  --package.image_format=ext4 \
  --package.sd_file build/gemm_32x32x32/x1/hw_emu/gemm_aie_xrt.elf build/gemm_32x32x32/x1/hw_emu/vck190_aie_gemm.hw_emu.xsa build/gemm_32x32x32/x1/hw_emu/libadf.a \
  --package.sd_file build/gemm_32x32x32/x1/hw_emu/gemm_aie_xrt_inf_run.elf  \
  --package.sd_file design/exec_scripts/run_script.sh \
  --package.defer_aie_run


# Feature_Tutorials 05
# aiecompiler --target=x86sim -include="/tools/Xilinx/Vitis/2022.2/aietools/include" -include="./aie" -include="./data" -include="./aie/kernels" -include="./" --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm -workdir=./Work  aie/graph.cpp
# v++ -c -t sw_emu --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm --save-temps -g -k s2mm pl_kernels/s2mm.cpp -o s2mm.xo
# v++ -l --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm s2mm.xo mm2s.xo libadf.a -t sw_emu --save-temps -g --config system.cfg -o tutorial.xsa
# emconfigutil --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm --nd 1;\
# v++ -p -t sw_emu \
  --package.defer_aie_run \
  --platform /tools/Xilinx/Vitis/2022.2/base_platforms/xilinx_vck190_base_202220_1/xilinx_vck190_base_202220_1.xpfm \
  --package.sd_dir /opt/xilinx/xrt \
  --package.out_dir ./package.sw_emu \
  --package.ps_on_x86 \
  ../tutorial.xsa ../libadf.a
# g++ -Wall -c -std=c++14 -D__SYNCBO_ENABLE__ -D__PS_ENABLE_AIE__ -Wno-int-to-pointer-cast -I/opt/xilinx/xrt//include -I./ -I../aie -I/tools/Xilinx/Vitis/2022.2/aietools/include  -o aie_control_xrt.o ../Work/ps/c_rts/aie_control_xrt.cpp
# g++ -Wall -c -std=c++14 -D__SYNCBO_ENABLE__ -D__PS_ENABLE_AIE__ -Wno-int-to-pointer-cast -I/opt/xilinx/xrt//include -I./ -I../aie -I/tools/Xilinx/Vitis/2022.2/aietools/include  -o host.o host.cpp
# g++ *.o -ladf_api_xrt -lxrt_coreutil -L/tools/Xilinx/Vitis/2022.2/aietools/lib/lnx64.o -L/opt/xilinx/xrt//lib -o ./host_ps_on_x86